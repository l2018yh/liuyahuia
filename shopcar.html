<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>礼无忧网,礼物网,结婚礼物,送女朋友生日礼物,送男朋友生日礼物,送什么礼物好,七夕情人节礼物,创意情人节礼物,圣诞节礼物</title>
    <link rel="shortcut icon" href="img/favicon (1).ico">
    <link rel="stylesheet" href="css/public.css">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/shoppingcar.css">
</head>
<body>
<!-- header -->
    <header>
        <div class="header_bottom">
            <a href="##"class="header_logo"></a>
            <h3>我的购物车</h3>
            <ul class="header_right">
                <li><a href="login.html" class="right_deng">登录</a>/<a class="right_deng" href="register.html">注册</a></li>
                <li><a href="##">浏览历史</a></li>
            </ul>
        </div>
    </header>
    <!-- 回到顶部 -->
    <div class="top">
        <a href="http://crm2.qq.com/page/portalpage/wpa.php?uin=4006112156&amp;cref=http://www.liwuyou.com/&amp;ref=&amp;f=1&amp;ty=1&amp;ap=&amp;as=" target="_blank""><i class="icn_a"></i></a>
        <a href="##"><i class="icn_b"></i></a>
    </div>
<!-- section -->
    <section>
        <div class="lianxi">
            <p><a href="index.html"> 首页</a>   /   购物车</p>
            <p>服务热线：0755-86380505、0755-86380506（8:00-24:00）<a class="jiaotan" href="##">QQ在线交谈</a></p>
        </div>
        <div class="box"> 
            <table> 
                <thead class="tb_head"> 
                    <th class="check"><input type="checkbox" id="selectAll"/>选择</th> 
                    <th class="info">商品信息</th> 
                    <th>单价</th> 
                    <th>数量</th> 
                    <th>库存</th> 
                    <th>小计</th>
                    <th>操作</th> 
                </thead> 
                <tbody id="tb" class="tb_tr"> 
                    <!-- <tr> 
                        <td><input class="checkt" type="checkbox" /></td> 
                        <td>
                            <div>
                                <img src="img/sp02.jpg" alt="">
                            </div>
                            <div>
                                <p>爱恋云端</p>
                                <p>礼物颜色：薄荷绿</p>
                            </div>
                        </td> 
                        <td class="proPirce">￥<span>88.0</span></td> 
                        <td class="jishu"> 
                            <span class="jian">-</span> 
                            <input type="text" value="1" readonly="readonly"/> 
                            <span class="jia">+</span> 
                        </td> 
                        <td> 
                            <span>有库存</span> 
                        </td> 
                        <td class="money">￥<span class="proMoney">88.0</span></td>
                        <td class="del"> 
                            <a href="##"></a> 
                        </td> 
                    </tr>
                    <tr> 
                        <td><input class="checkt" type="checkbox" /></td> 
                        <td>
                            <div>
                                <img src="img/sp02.jpg" alt="">
                            </div>
                            <div>
                                <p>爱恋云端</p>
                                <p>礼物颜色：薄荷绿</p>
                            </div>
                        </td> 
                        <td class="proPirce">￥<span>88.0</span></td> 
                        <td class="jishu"> 
                            <span class="jian">-</span> 
                            <input type="text" value="1" readonly="readonly"/> 
                            <span class="jia">+</span> 
                        </td> 
                        <td> 
                            <span>有库存</span> 
                        </td> 
                        <td class="money">￥<span class="proMoney">88.0</span></td>
                        <td class="del"> 
                            <a href="##"></a> 
                        </td> 
                    </tr>   -->
                </tbody> 
            </table> 
            <div class="jg">
                <div><i></i><a href="##">继续购物</a></div>
                <div class="zj">
                    <p>共计<span class="totalCount">1</span>件商品&nbsp;&nbsp;合计：￥<span class="totalPirces">88.0</span></p>
                    <p>去结账</p>
                </div>
            </div>
        </div> 
    </section>
<!-- footer -->
    <footer>
        <ul class="one_ul">
            <li class="one_li"></li>
            <li></li>
            <li class="three_li">
                <h3>关于我们</h3>    
                <a href="##" id="one"></a>
                <a href="##" id="two"></a>
                <a href="##" id="three">
                    <img src="img/wx.png" alt="">
                </a>
            </li>
            <li class="four_li">
                <h3>0755-86380505</h3>
                <p>周一至周日 8:00-24:00</p>
                <p>QQ在线交谈</p>
            </li>
        </ul>
        <ul class="two_ul">
            <li class="two_li_top">
                <ul>
                    <li>
                        <p ></p>
                        <h3>三十天免费退换货</h3>
                    </li>
                    <li>
                        <p></p>
                        <h3>100%正品保证</h3>
                    </li>
                    <li>
                        <p ></p>
                        <h3>全场免运费</h3>
                    </li>
                    <li>
                        <p ></p>
                        <h3>提供礼品级包装</h3>
                    </li>
                </ul>
            </li>
            <li class="two_li-center">
                <p>&copy liwuyou.com&nbsp;&nbsp;粤ICP备10222238号-1</p>
                <div>
                    <a href="##">关于我们&nbsp;&nbsp;|&nbsp;&nbsp;</a>
                    <a href="##">帮助中心&nbsp;&nbsp;|&nbsp;&nbsp;</a>
                    <a href="##">人才招聘&nbsp;&nbsp;|&nbsp;&nbsp;</a>
                    <a href="##">售后服务&nbsp;&nbsp;|&nbsp;&nbsp;</a>
                    <a href="##">配送与验收&nbsp;&nbsp;|&nbsp;&nbsp;</a>
                    <a href="##">联系我们</a>
                </div>
            </li>
            <li class="two_li_bottom">
                <div>
                    <p>友情链接：</p>&nbsp;
                    <a href="##">厦门特产</a>
                    <a href="##">新疆和田玉</a>
                    <a href="##">健身减肥</a>
                    <a href="##">钻石定制</a>
                    <a href="##">紫砂壶</a>
                    <a href="##">批发网</a>
                    <a href="##">服装搭配</a>
                    <a href="##">中国鲜花网</a>
                    <a href="##">鞋</a>
                    <a href="##">纸艺网</a>
                    <a href="##">商机网</a>
                    <a href="##">唯品会品牌网</a>
                    <a href="##">53货源网</a>
                    <a href="##">饰品招商网</a>
                    <a href="##">型尚网</a>
                    <a href="##">好乐淘卖鞋</a>
                    <a href="##">网上冲印</a>
                    <a href="##">网上冲印</a>
                    <a href="##">网上冲印</a>
                    <a href="##">网上冲印</a>
                    <a href="##">网上冲印</a>
                    <a href="##">网上冲印</a>
                    <a href="##">网上冲印</a>
                    <a href="##">网上冲印</a>
                    <a href="##">网上冲印</a>
                    <a href="##">网上冲印</a>
                    <a href="##">网上冲印</a>
                    <a href="##">网上冲印</a>
                    <a href="##">网上冲印</a>
                    <a href="##">网上冲印</a>
                    <a href="##">网上冲印</a>
                    <a href="##">网上冲印</a>
                    <a href="##">钻石网</a>
                    <a href="##">钻石网</a>
                    <a href="##">钻石网</a>
                    <a href="##">钻石网</a>
                    <a href="##">钻石网</a>
                    <a href="##">比价</a>
                    <a href="##">中国品牌服装网</a>
                    <span>申请友链QQ：59569526</span>
                </div>
                <div></div>
            </li>
        </ul>
    </footer>
</body>
</html>
<script type="text/javascript" src="js/jquery-1.8.3.js"></script>
<script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript" src="js/checkall.js"></script>
<!-- <script type="text/javascript" src="js/shoppingcar.js"></script> -->
<!-- 购物车 -->
<script type="text/javascript"> 
    $(function(){
    //获取ajax请求获取所有的商品
    $.ajax({
        type:"post",
        url:"php/getGoodsList.php",
        dataType:"json",
        async:true,
        data:{},
        success:function(data){
            console.log(data);
            for(let i =0; i<data.length;i++){
                let str = "<tr><td><input class = 'checkt' type = 'checkbox'/></td>\
                <td><div><img src = '"+data[i].beiyong6+"'></div>\
                <div><p>恋爱云端</p><p>礼物颜色：薄荷绿</p></div></td>\
                <td class = 'proPrice'>￥<span>"+data[i].goodsPrice+"</span></td><td class='jishu'>\
                <span class='jian'>-</span><input type='text' value ='1' readonly='readonly'/>\
                <span class='jia'>+</span></td><td><span>"+data[i].goodsDesc+"</span></td>\
                <td class = 'money'>￥<span class='proMoney'>"+data[i].goodsPrice+"</span></td>\
                <td class = 'del'><a href = '##'></a></td></tr>";
                $(".tb_tr").append(str);
            }
        }
    })
})

    // 全选
	$("#selectAll").click(function(){	
		$(".checkt").prop("checked", this.checked);
		change();
	})

// 单选
	$(".checkt").click(function(){
		change();
	})

// 删除
	$(".del").click(function(){
		$(this).parents("tr").remove();
	change();
	})

// // 删除所有
	$(".delAll").click(function(){
		$(".checkt:checked").parents("tr").remove();
		change();
	})

// 减
	$(".jian").click(function(){
	// 改变数量
		var _this = this;
		let count1 = parseInt($(this).siblings("input").val());
		$(this).siblings("input").val(function(){
			count1--;
			if(count1 <0){
				return 0;
			}else{
				return (count1);
			}
		});
		//改变小计
		$(this).parents("tr").find(".proMoney").html(function(){
			return count1 * parseInt($(this).parents("tr").find(".proPirce span").html());
		})	
		change();
	})
//加
	$(".jia").click(function(){
	// 改变数量
		var _this = this;
		let count2 = parseInt($(this).siblings("input").val());
		$(this).siblings("input").val(function(){	
			count2++;
			return (count2);
		})	
		//改变小计
		$(this).parents("tr").find(".proMoney").html(function(){
			return count2*parseInt($(this).parents("tr").find(".proPirce span").html());
		})
		change();
	})
	
// 改变合计和件数的方法
	function change(){
		$("#selectAll").prop("checked", $(".checkt:checked").length == $(".checkt").length);
	// 改变件数
		let vals = 0 ; 
		$(".jishu").each(function(){
			vals += parseInt($(this).find("input").val());
			$(".totalCount").html(vals);
		})
	// 改变合计
		$(".totalPirces").html(function(){
			var pic = 0;
			$(".money").each(function(){
				pic += parseInt($(this).find(".proMoney").html());
			})
			return pic;
		})
	}

</script>
